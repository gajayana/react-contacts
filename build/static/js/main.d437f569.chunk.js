(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,a){t.exports=a(20)},16:function(t,e,a){},18:function(t,e,a){},20:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),o=a(8),i=a.n(o),r=(a(16),a(10)),l=a(9),c=a(1),h=a(2),m=a(3),p=a(6),u=a(4),d=a(5),f=(a(18),function(t){function e(){return Object(h.a)(this,e),Object(p.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(m.a)(e,[{key:"handleImage",value:function(t){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t.replace("http://","https://"):"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"}},{key:"render",value:function(){var t={backgroundImage:'url("'+this.handleImage(this.props.item.photo)+'")'};return s.a.createElement("div",{className:"pa-1"},s.a.createElement("div",{className:"App--profile-image",style:t}),s.a.createElement("div",{className:"text-center"},s.a.createElement("div",null,this.props.item.firstName," ",this.props.item.lastName),s.a.createElement("div",null,s.a.createElement("small",null,this.props.item.age," years of age"))),s.a.createElement("div",null,s.a.createElement("button",{onClick:this.props.toggle_update.bind(this,this.props.item),type:"button"},"Update"),s.a.createElement("button",{onClick:this.props.remove.bind(this,this.props.item),type:"button"},"Remove")))}}]),e}(n.Component)),g=function(t){function e(t){var a;return Object(h.a)(this,e),(a=Object(p.a)(this,Object(u.a)(e).call(this,t))).state={id:"",first_name:"",last_name:"",age:1,photo:""},a.disableButton=a.disableButton.bind(Object(c.a)(Object(c.a)(a))),a.handleChange=a.handleChange.bind(Object(c.a)(Object(c.a)(a))),a}return Object(d.a)(e,t),Object(m.a)(e,[{key:"disableButton",value:function(){var t=!1;return(!this.state.first_name||this.state.first_name.length<3)&&(t=!0),(!this.state.last_name||this.state.last_name.length<3)&&(t=!0),0!==this.state.photo.indexOf("https://")&&(t=!0),this.props.is_processing&&(t=!0),t}},{key:"handleChange",value:function(t){var e=t.target.name,a=t.target.value.trim();"age"===e&&(a=parseInt(a,10)),"photo"===e&&(a=a.replace("http://","https://")),this.setState(Object(l.a)({},e,a))}},{key:"render",value:function(){var t=Object(r.a)(Array(200)).map(function(t,e){return e+1});return s.a.createElement("div",{className:"App--modal"},s.a.createElement("form",{className:"App--form pa-1"},s.a.createElement("h1",null,this.props.form_title),s.a.createElement("div",{className:"mb-1"},s.a.createElement("label",{className:"App--form-label"},"First Name"),s.a.createElement("input",{className:"App--form-input",disabled:this.props.is_processing,maxLength:"25",name:"first_name",type:"text",value:this.state.first_name,onChange:this.handleChange})),s.a.createElement("div",{className:"mb-1"},s.a.createElement("label",{className:"App--form-label"},"Last Name"),s.a.createElement("input",{className:"App--form-input",disabled:this.props.is_processing,maxLength:"25",name:"last_name",type:"text",value:this.state.last_name,onChange:this.handleChange})),s.a.createElement("div",{className:"mb-1"},s.a.createElement("label",{className:"App--form-label"},"Photo URL"),s.a.createElement("input",{className:"App--form-input",disabled:this.props.is_processing,name:"photo",type:"text",value:this.state.photo,onChange:this.handleChange})),s.a.createElement("div",{className:"mb-1"},s.a.createElement("label",{className:"App--form-label"},"Your Age"),s.a.createElement("select",{className:"App--form-input",disabled:this.props.is_processing,name:"age",value:this.state.age,onChange:this.handleChange},t.map(function(t){return s.a.createElement("option",{value:t,key:"age-"+t},t)}))),s.a.createElement("div",null,s.a.createElement("button",{disabled:this.disableButton(),onClick:this.props.handler.bind(this,this.state),type:"button"},"Save"),s.a.createElement("button",{disabled:this.props.is_processing,onClick:this.props.toggle,type:"button"},"Cancel"))))}},{key:"componentDidMount",value:function(){this.props.item&&this.setState({id:this.props.item.id,first_name:this.props.item.firstName,last_name:this.props.item.lastName,age:this.props.item.age,photo:this.props.item.photo})}}]),e}(n.Component),b=function(t){function e(t){var a;return Object(h.a)(this,e),(a=Object(p.a)(this,Object(u.a)(e).call(this,t))).state={contacts:[],is_loading:!0,is_saving:!1,show_create_form:!1,show_update_form:!1,update_form_item:null,url:"https://cors-available.herokuapp.com/https://simple-contact-crud.herokuapp.com"},a.handleRemove=a.handleRemove.bind(Object(c.a)(Object(c.a)(a))),a.toggleForm=a.toggleForm.bind(Object(c.a)(Object(c.a)(a))),a.toggleUpdateForm=a.toggleUpdateForm.bind(Object(c.a)(Object(c.a)(a))),a.handleSave=a.handleSave.bind(Object(c.a)(Object(c.a)(a))),a.handleUpdate=a.handleUpdate.bind(Object(c.a)(Object(c.a)(a))),a}return Object(d.a)(e,t),Object(m.a)(e,[{key:"handleRemove",value:function(t){var e=this.state.contacts.filter(function(e){return e!==t});this.setState({contacts:e}),fetch(this.state.url+"/contact/"+t.id,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}},{key:"handleSave",value:function(t){var e=this,a={firstName:t.first_name,lastName:t.last_name,age:t.age,photo:t.photo};this.setState({is_saving:!0}),fetch(this.state.url+"/contact",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a)}).then(function(t){return t.json()}).then(function(t){fetch(e.state.url+"/contact").then(function(t){return t.json()}).then(function(t){e.setState({contacts:t.data,is_saving:!1,show_create_form:!1})}).catch(function(t){return console.log(t)})}).catch(function(t){return console.log(t)})}},{key:"handleUpdate",value:function(t){var e=this;fetch(this.state.url+"/contact/"+t.id,{method:"PUT",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({firstName:t.first_name,lastName:t.last_name,age:t.age,photo:t.photo})}).then(function(t){return t.json()}).then(function(a){var n=e.state.contacts,s=n.findIndex(function(e){return e.id===t.id});n[s].firstName=t.first_name,n[s].lastName=t.last_name,n[s].age=t.age,n[s].photo=t.photo,e.setState({contacts:n,show_update_form:!1,update_form_item:null})}).catch(function(t){return console.log(t)})}},{key:"toggleForm",value:function(){this.setState({show_create_form:!this.state.show_create_form})}},{key:"toggleUpdateForm",value:function(t){this.setState({show_update_form:!this.state.show_update_form,update_form_item:t})}},{key:"render",value:function(){var t,e=this;return t=this.state.is_loading?s.a.createElement("p",null,"Loading contacts..."):this.state.contacts.map(function(t){return s.a.createElement(f,{item:t,key:t.id,remove:e.handleRemove,toggle_update:e.toggleUpdateForm})}),s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"App--profiles"},t),s.a.createElement("div",{className:"bt-1 pa-1"},this.state.show_create_form?s.a.createElement(g,{toggle:this.toggleForm,form_title:"Add New Contact",handler:this.handleSave,is_processing:this.state.is_saving}):null,this.state.show_update_form?s.a.createElement(g,{toggle:this.toggleUpdateForm,form_title:"Update A Contact",handler:this.handleUpdate,is_processing:this.state.is_updating,item:this.state.update_form_item}):null,this.state.show_create_form?null:s.a.createElement("button",{onClick:this.toggleForm,type:"button"},"Create")))}},{key:"componentDidMount",value:function(){var t=this;fetch(this.state.url+"/contact").then(function(t){return t.json()}).then(function(e){t.setState({contacts:e.data,is_loading:!1})}).catch(function(t){return console.log(t)})}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[11,2,1]]]);
//# sourceMappingURL=main.d437f569.chunk.js.map